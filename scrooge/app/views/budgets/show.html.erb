<p>SELECTED BUDGET</p>
<h2>Budget Name: <span id="name"></span></h2>
<h3>Starting Amount: <span id="amount"></span></h3>
<h3>Current Amount: <span id="current_amount"></span></h3>
<br>

<p><button id="transactions_button">See Transactions</button></p>

<div id="transactions_section"> 
		<table id ="transactions_table" class="table">
				<thead><td>Date</td><td>Amount</td><td>Description</td>
					
				</thead>
		</table>
</div>

<p><%= link_to "Edit Budget", edit_budget_path(@budget) %></p>
<p><%= link_to "Delete this Budget", budget_path(@budget), method: :delete, data: { confirm: 'Are you sure you want to delete this budget? All of the transactions associated with this budget will also be deleted.' } %></p>

<script type="text/javascript">
$(document).ready(function() {
	getBudget(<%=@id%>, budget => {
	//arrow operator replaces function(budget) {...
		$('#name').html(budget.name);
		$('#amount').html(budget.amount);
		$('#current_amount').html(budget.current_amount);
	});


	$("#transactions_button").click(() => {
	console.log("got click")
	 	getTransactions(<%=@id%>, transactions => {
	 		$('#transactions_table').append(
	 			transactions.map(transaction => 
	 					`<tr>
	 					<td>${transaction.date}</td>
	 					<td>${transaction.amount}</td>
	 					<td>${transaction.description}</td>
	 					</tr>`
	 			));
	 	});
	});
});
</script>

